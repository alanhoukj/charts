var dataMap = {};

function dataMix(list) {
    var mixData = {};
    for (var i = 0, l = list.length; i < l; i++) {
        for (var key in list[i]) {
            if (list[i][key] instanceof Array) {
                mixData[key] = mixData[key] || [];
                for (var j = 0, k = list[i][key].length; j < k; j++) {
                    mixData[key][j] = mixData[key][j] 
                                      || {name : list[i][key][j].name, value : []};
                    mixData[key][j].value.push(list[i][key][j].value);
                }
            }
        }
    }
    return mixData;
}

function dataFormatter1(obj) {
    var pList = ['长宁区','闵行区','宝山区','黄浦区','徐汇区','浦东新区','普陀区','嘉定区','松江区','崇明县','金山区','虹口区','青浦区','静安区','杨浦区','奉贤区'];
    var temp;
    var max = 0;
    for (var year = 2011; year <= 2015; year++) {
        temp = obj[year];
        for (var i = 0, l = temp.length; i < l; i++) {
            max = Math.max(max, temp[i]);
            obj[year][i] = {
                name : pList[i],
                value : temp[i]
            }
        }
        obj[year+'max'] = Math.floor(max/100) * 100;
    }
    return obj;
}


dataMap.dataSize1Red = dataFormatter1({
	2011:[6,34,39,16,12,47,17,102,31,14,25,8,27,39,14,23],
	2012:[6,26,35,20,22,23,18,48,15,11,19,26,21,66,31,16],
	2013:[7,18,28,17,12,20,17,43,6,9,15,14,14,23,10,7],
	2014:[0,12,17,8,3,18,9,36,11,10,10,4,7,8,7,27],
	2015:[1,9,5,6,0,6,8,23,9,3,3,0,4,6,8,9],
	all:[20,96,117,66,49,108,67,244,72,46,71,51,71,129,68,77]
});

dataMap.dataSize2Red = dataFormatter1({
	2011:[0,3,0,0,1,6,0,1,0,1,0,1,0,0,1,1],
	2012:[0,8,2,2,0,8,0,4,0,0,1,2,0,9,2,3],
	2013:[1,1,8,0,1,10,2,6,0,5,0,1,1,1,3,3],
	2014:[0,3,4,0,0,5,2,7,0,1,1,1,2,2,2,5],
	2015:[0,5,5,2,0,7,2,3,1,0,1,1,1,1,2,0],
	all:[1,20,19,2,2,36,5,21,1,7,3,6,4,14,10,14]
});


dataMap.dataSize3Red = dataFormatter1({
	2011:[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	2012:[1,1,0,1,0,1,0,1,0,0,0,0,0,1,0,0],
	2013:[0,2,3,1,0,3,0,1,0,0,0,0,0,0,1,0],
	2014:[0,0,3,1,0,1,0,1,0,0,0,0,0,1,0,0],
	2015:[0,0,1,0,0,1,0,2,0,0,0,0,0,1,0,0],
	all:[1,4,7,3,0,6,0,5,0,0,0,0,0,3,1,0]
});


dataMap.dataSize1Yellow = dataFormatter1({
	2011:[50,300,123,107,58,119,47,514,35,57,177,61,46,78,60,164],
	2012:[63,448,209,195,94,233,109,392,72,108,251,86,105,106,205,252],
	2013:[67,367,376,117,129,375,99,107,108,122,469,135,171,115,268,254],
	2014:[75,678,962,123,137,531,150,914,192,227,729,255,288,151,215,316],
	2015:[25,196,241,70,55,267,57,336,101,86,324,52,113,69,67,148],
	all:[280,1989,1911,612,473,1525,462,3230,508,600,1950,589,723,519,815,1134]
});

dataMap.dataSize2Yellow = dataFormatter1({
	2011:[4,2,21,3,5,21,6,20,9,4,7,11,3,6,5,13],
	2012:[4,9,21,6,7,33,7,18,8,17,3,11,4,18,8,12],
	2013:[2,7,20,3,4,16,10,15,5,8,4,10,2,7,5,11],
	2014:[1,6,12,3,4,16,4,14,6,5,2,6,4,0,2,7],
	2015:[4,2,8,2,2,9,3,10,3,2,2,5,2,0,1,9],
	all:[15,26,82,17,22,95,30,77,31,36,18,43,15,31,21,52]
});


dataMap.dataSize3Yellow = dataFormatter1({
	2011:[0,1,0,1,0,3,0,0,0,1,0,0,0,0,0,0],
	2012:[1,1,2,0,0,2,2,1,0,0,0,1,1,1,0,1],
	2013:[2,1,2,1,0,0,0,1,1,0,1,0,0,1,0,0],
	2014:[0,1,0,0,0,3,0,0,0,0,0,0,0,0,0,0],
	2015:[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	all:[3,5,4,2,0,8,2,2,1,1,1,1,1,2,0,1]
});

