<%@ page pageEncoding="UTF-8"%>

<html>
<head>
<title>heatMap</title>

<!-- ECharts单文件引入 -->

<script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
<!-- <script type="text/javascript" src="../js/echarts.min.js"></script> -->
<script type="text/javascript" src="../js/echarts.min.js"></script>
<body>
	<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
	<div id="main" style="width: 100%; height: 100%"></div>
	<script type="text/javascript">
	
		var myChart = echarts.init(document.getElementById('main'));

		var hours = ['总数',
		             '市地税局',
		             '市工商局',
		             '市食品药品监管局',
		             '市高级法院',
		             '市环保局',
		             '市质量技监局',
		             '市建设管理委',
		             '市交通委',
		             '市水务局（市海洋局)',
		             '上海海关',
		             '市安全监管局',
		             '市规划国土资源局',
		             '市卫生计生委',
		             '市烟草专卖局',
		             '市电力办',
		             '市绿化市容局',
		             '市发展改革委',
		             '长宁区',
		             '上海海事局',
		             '市公安局',
		             '市人力资源社会保障局',
		             '市统计局',
		             '市民防办公室',
		             '青浦区',
		             '华东能源局',
		             '市财政局',
		             '市知识产权局',
		             '市无线电管理局'];
		     var days = ['长宁', '闵行', '宝山', '黄浦', '徐汇',
							'浦东', '闸北', '普陀', '嘉定', '松江',
							'崇明', '金山', '虹口', '青浦', '静安',
							'杨浦', '奉贤', '卢湾','总数'];
		     var orgMap={0:'上海市',
		    		 1:'市地税局',
		    		 2:'市工商局',
		    		 3:'市食品药品监管局',
		    		 4:'市高级法院',
		    		 5:'市环保局',
		    		 6:'市质量技监局',
		    		 7:'市建设管理委',
		    		 8:'市交通委',
		    		 9:'市水务局（市海洋局)',
		    		 10:'上海海关',
		    		 11:'市安全监管局',
		    		 12:'市规划国土资源局',
		    		 13:'市卫生计生委',
		    		 14:'市烟草专卖局',
		    		 15:'市电力办',
		    		 16:'市绿化市容局',
		    		 17:'市发展改革委',
		    		 18:'长宁区',
		    		 19:'上海海事局',
		    		 20:'市公安局',
		    		 21:'市人力资源社会保障局',
		    		 22:'市统计局',
		    		 23:'市民防办公室',
		    		 24:'青浦区',
		    		 25:'华东能源局',
		    		 26:'市财政局',
		    		 27:'市知识产权局',
		    		 28:'市无线电管理局'};

		var data = [ [0,0,682],[0,1,3921],[0,2,3247],[0,3,857],[0,4,1223],[0,5,3603],[0,6,1182],[0,7,1058],[0,8,6002],[0,9,997],[0,10,1427],[0,11,2580],[0,12,1228],[0,13,1796],[0,14,466],[0,15,1506],[0,16,1933],[0,17,282],[0,18,33900],
		             [1,0,267],[1,1,2870],[1,2,2127],[1,3,517],[1,4,762],[1,5,1906],[1,6,830],[1,7,540],[1,8,4682],[1,9,650],[1,10,884],[1,11,2123],[1,12,766],[1,13,1366],[1,14,151],[1,15,974],[1,16,1482],[1,17,192],[1,18,23089],
		             [2,0,103],[2,1,215],[2,2,285],[2,3,54],[2,4,100],[2,5,362],[2,6,127],[2,7,113],[2,8,360],[2,9,108],[2,10,132],[2,11,165],[2,12,116],[2,13,149],[2,14,57],[2,15,100],[2,16,144],[2,17,15],[2,18,2705],
		             [3,0,153],[3,1,30],[3,2,112],[3,3,121],[3,4,167],[3,5,205],[3,6,20],[3,7,99],[3,8,78],[3,9,22],[3,10,82],[3,11,78],[3,12,112],[3,13,39],[3,14,162],[3,15,146],[3,16,43],[3,17,10],[3,18,1679],
		             [4,0,34],[4,1,207],[4,2,122],[4,3,26],[4,4,27],[4,5,346],[4,6,33],[4,7,39],[4,8,109],[4,9,27],[4,10,50],[4,11,36],[4,12,28],[4,13,77],[4,14,14],[4,15,58],[4,16,82],[4,17,6],[4,18,1321],
		             [5,0,8],[5,1,115],[5,2,126],[5,3,37],[5,4,16],[5,5,174],[5,6,12],[5,7,30],[5,8,245],[5,9,53],[5,10,25],[5,11,56],[5,12,11],[5,13,73],[5,14,16],[5,15,20],[5,16,74],[5,17,21],[5,18,1112],
		             [6,0,18],[6,1,107],[6,2,122],[6,3,20],[6,4,30],[6,5,113],[6,6,27],[6,7,79],[6,8,198],[6,9,64],[6,10,58],[6,11,59],[6,12,38],[6,13,38],[6,14,16],[6,15,61],[6,16,47],[6,17,9],[6,18,1104],
		             [7,0,24],[7,1,104],[7,2,91],[7,3,17],[7,4,29],[7,5,137],[7,6,34],[7,7,34],[7,8,115],[7,9,37],[7,10,115],[7,11,18],[7,12,32],[7,13,11],[7,14,10],[7,15,49],[7,16,24],[7,17,7],[7,18,888],
		             [8,0,18],[8,1,96],[8,2,97],[8,3,15],[8,4,25],[8,5,82],[8,6,51],[8,7,45],[8,8,49],[8,9,7],[8,10,37],[8,11,16],[8,12,30],[8,13,11],[8,14,8],[8,15,38],[8,16,8],[8,17,10],[8,18,643],
		             [9,0,25],[9,1,102],[9,2,81],[9,3,28],[9,4,23],[9,5,23],[9,6,31],[9,7,41],[9,8,78],[9,9,4],[9,10,7],[9,11,1],[9,12,20],[9,13,3],[9,14,15],[9,15,18],[9,16,1],[9,17,6],[9,18,507],
		             [10,0,7],[10,1,36],[10,2,22],[10,3,8],[10,4,11],[10,5,148],[10,6,4],[10,7,11],[10,8,20],[10,9,4],[10,10,9],[10,11,2],[10,12,59],[10,13,7],[10,14,10],[10,15,7],[10,16,15],[10,17,1],[10,18,381],
		             [11,0,1],[11,1,8],[11,2,53],[11,3,1],[11,4,1],[11,5,20],[11,6,1],[11,7,2],[11,8,20],[11,9,1],[11,10,8],[11,11,5],[11,12,2],[11,13,0],[11,14,0],[11,15,3],[11,16,5],[11,17,0],[11,18,131],
		             [12,0,0],[12,1,6],[12,2,2],[12,3,1],[12,4,2],[12,5,30],[12,6,3],[12,7,1],[12,8,26],[12,9,11],[12,10,10],[12,11,8],[12,12,1],[12,13,15],[12,14,1],[12,15,2],[12,16,5],[12,17,0],[12,18,124],
		             [13,0,9],[13,1,5],[13,2,1],[13,3,3],[13,4,18],[13,5,11],[13,6,4],[13,7,12],[13,8,7],[13,9,2],[13,10,0],[13,11,1],[13,12,4],[13,13,0],[13,14,5],[13,15,6],[13,16,0],[13,17,4],[13,18,92],
		             [14,0,0],[14,1,5],[14,2,0],[14,3,4],[14,4,4],[14,5,6],[14,6,3],[14,7,5],[14,8,2],[14,9,1],[14,10,3],[14,11,2],[14,12,6],[14,13,3],[14,14,0],[14,15,17],[14,16,2],[14,17,0],[14,18,63],
		             [15,0,0],[15,1,5],[15,2,0],[15,3,1],[15,4,1],[15,5,8],[15,6,0],[15,7,1],[15,8,5],[15,9,1],[15,10,1],[15,11,1],[15,12,0],[15,13,1],[15,14,0],[15,15,0],[15,16,0],[15,17,0],[15,18,25],
		             [16,0,0],[16,1,2],[16,2,0],[16,3,0],[16,4,3],[16,5,2],[16,6,0],[16,7,0],[16,8,5],[16,9,0],[16,10,2],[16,11,8],[16,12,0],[16,13,0],[16,14,0],[16,15,0],[16,16,1],[16,17,0],[16,18,23],
		             [17,0,0],[17,1,3],[17,2,1],[17,3,3],[17,4,1],[17,5,6],[17,6,0],[17,7,1],[17,8,1],[17,9,0],[17,10,0],[17,11,0],[17,12,0],[17,13,0],[17,14,1],[17,15,0],[17,16,0],[17,17,1],[17,18,18],
		             [18,0,14],[18,1,0],[18,2,0],[18,3,1],[18,4,1],[18,5,0],[18,6,0],[18,7,0],[18,8,0],[18,9,1],[18,10,0],[18,11,0],[18,12,0],[18,13,0],[18,14,0],[18,15,0],[18,16,0],[18,17,0],[18,18,17],
		             [19,0,0],[19,1,0],[19,2,2],[19,3,0],[19,4,1],[19,5,8],[19,6,0],[19,7,0],[19,8,0],[19,9,0],[19,10,1],[19,11,0],[19,12,1],[19,13,0],[19,14,0],[19,15,3],[19,16,0],[19,17,0],[19,18,16],
		             [20,0,1],[20,1,0],[20,2,0],[20,3,0],[20,4,1],[20,5,4],[20,6,0],[20,7,4],[20,8,0],[20,9,4],[20,10,0],[20,11,1],[20,12,0],[20,13,0],[20,14,0],[20,15,1],[20,16,0],[20,17,0],[20,18,16],
		             [21,0,0],[21,1,1],[21,2,1],[21,3,0],[21,4,0],[21,5,6],[21,6,1],[21,7,0],[21,8,1],[21,9,0],[21,10,1],[21,11,0],[21,12,0],[21,13,1],[21,14,0],[21,15,0],[21,16,0],[21,17,0],[21,18,12],
		             [22,0,0],[22,1,3],[22,2,1],[22,3,0],[22,4,0],[22,5,2],[22,6,1],[22,7,1],[22,8,0],[22,9,0],[22,10,0],[22,11,0],[22,12,1],[22,13,0],[22,14,0],[22,15,2],[22,16,0],[22,17,0],[22,18,11],
		             [23,0,0],[23,1,0],[23,2,1],[23,3,0],[23,4,0],[23,5,2],[23,6,0],[23,7,0],[23,8,1],[23,9,0],[23,10,2],[23,11,0],[23,12,0],[23,13,0],[23,14,0],[23,15,0],[23,16,0],[23,17,0],[23,18,6],
		             [24,0,0],[24,1,0],[24,2,0],[24,3,0],[24,4,0],[24,5,0],[24,6,0],[24,7,0],[24,8,0],[24,9,0],[24,10,0],[24,11,0],[24,12,0],[24,13,2],[24,14,0],[24,15,0],[24,16,0],[24,17,0],[24,18,2],
		             [25,0,0],[25,1,0],[25,2,0],[25,3,0],[25,4,0],[25,5,1],[25,6,0],[25,7,0],[25,8,0],[25,9,0],[25,10,0],[25,11,0],[25,12,0],[25,13,0],[25,14,0],[25,15,1],[25,16,0],[25,17,0],[25,18,2],
		             [26,0,0],[26,1,0],[26,2,0],[26,3,0],[26,4,0],[26,5,0],[26,6,0],[26,7,0],[26,8,0],[26,9,0],[26,10,0],[26,11,0],[26,12,1],[26,13,0],[26,14,0],[26,15,0],[26,16,0],[26,17,0],[26,18,1],
		             [27,0,0],[27,1,1],[27,2,0],[27,3,0],[27,4,0],[27,5,0],[27,6,0],[27,7,0],[27,8,0],[27,9,0],[27,10,0],[27,11,0],[27,12,0],[27,13,0],[27,14,0],[27,15,0],[27,16,0],[27,17,0],[27,18,1],
		             [28,0,0],[28,1,0],[28,2,0],[28,3,0],[28,4,0],[28,5,1],[28,6,0],[28,7,0],[28,8,0],[28,9,0],[28,10,0],[28,11,0],[28,12,0],[28,13,0],[28,14,0],[28,15,0],[28,16,0],[28,17,0],[28,18,1]];

		data = data.map(function(item) {
			return [ item[1], item[0], item[2] || '-' ];
		});

		option = {
			title : {
				text : '上海市2011-2015年法人失信记录来源统计',
				left : 'center'
			},
			grid:{
				left:'15%'
			},
			tooltip : {
				position : 'top',
				formatter : function(obj) {
					var data = obj.data;
					if (obj.name=="总数"){
						return orgMap[obj.data[1]]+"总数： "+obj.data[2];
					}else if(obj.value[1]==0) {
						return obj.name +"失信记录总数： "+ obj.data[2];
					}else{
						return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'
						+ obj.name
						+( obj.name=="崇明"? "县" :"区")
						+ obj.seriesName
						+ '</div>'
						+ '来源: '
						+ orgMap[obj.data[1]]
						+ '， 数量: '
						+ obj.data[2]
						+ ' <br>';
					}
				
				}
			},
			animation : false,
			xAxis : {
				type : 'category',
				data : days,
			},
			yAxis : {
				type : 'category',
				data : hours
			},
			visualMap : {
				min : 1,
				max : 100,
				calculable : true,
				orient : 'vertical',
				color : [ '#d94e5d', '#eac736', '#50a3ba' ],
				left : 'right',
				top:'middle'
			},
			series : [ {
				name : '失信记录数',
				type : 'heatmap',
				data : data,
				label : {
					normal : {
						show : true
					}
				}
			} ]
		};

		myChart.setOption(option);
	</script>
</body>

</html>
